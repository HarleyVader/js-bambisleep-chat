<!DOCTYPE html>
<html lang="en">
<%- include('./partials/head', { title: 'Delete Profile' }) %>
<body>
  <%- include('./partials/nav') %>

  <div class="container">
    <div class="profile-container">
      <h1>Delete Your Profile</h1>
      
      <div class="alert alert-warning">
        <p><strong>Warning:</strong> You are about to delete your profile. This action cannot be undone.</p>
      </div>
      
      <div class="profile-summary">
        <h2>Profile Summary</h2>
        <div class="profile-info">
          <p><strong>Username:</strong> <%= profile.username %></p>
          <p><strong>Display Name:</strong> <%= profile.displayName || 'Not set' %></p>
          <p><strong>Created:</strong> <%= new Date(profile.createdAt).toLocaleDateString() %></p>
          <p><strong>Triggers:</strong> <%= profile.triggers ? profile.triggers.length : 0 %></p>
        </div>
      </div>
      
      <div class="confirmation-actions">
        <form id="delete-form" method="POST" action="/profile/<%= profile.username %>/delete">
          <button type="submit" class="delete-profile-btn">Yes, Delete My Profile</button>
        </form>
        <a href="/profile/<%= profile.username %>" class="cancel-btn">Cancel</a>
      </div>
    </div>
  </div>

  <div class="notification-area"></div>

  <script>
    document.getElementById('delete-form').addEventListener('submit', function(e) {
      if (!confirm('Are you absolutely sure you want to delete your profile? This cannot be undone!')) {
        e.preventDefault();
      }
    });
  </script>

  <%- include('./partials/footer') %>
</body>
</html>